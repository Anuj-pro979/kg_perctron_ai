<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="capsuleGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4F46E5;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7C3AED;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="activeGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#EF4444;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#F97316;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F8FAFC;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#E2E8F0;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="4" stdDeviation="3" flood-color="#000" flood-opacity="0.2"/>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="1200" height="800" fill="url(#bgGrad)"/>
  
  <!-- Title -->
  <text x="600" y="40" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#1E293B">
    Knowledge Capsules Algorithm Architecture
  </text>
  
  <!-- Input Query -->
  <rect x="50" y="80" width="200" height="60" rx="10" fill="#10B981" filter="url(#shadow)"/>
  <text x="150" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">INPUT QUERY</text>
  <text x="150" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white">"How to stay healthy?"</text>
  
  <!-- Arrow from input -->
  <path d="M 250 110 L 300 110" stroke="#374151" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- Step 1: Similarity Calculation -->
  <rect x="320" y="80" width="180" height="60" rx="10" fill="#3B82F6" filter="url(#shadow)"/>
  <text x="410" y="100" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">STEP 1</text>
  <text x="410" y="115" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">Calculate</text>
  <text x="410" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">Similarities</text>
  
  <!-- Arrow -->
  <path d="M 500 110 L 550 110" stroke="#374151" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- Step 2: Activation Function -->
  <rect x="570" y="80" width="180" height="60" rx="10" fill="#8B5CF6" filter="url(#shadow)"/>
  <text x="660" y="100" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">STEP 2</text>
  <text x="660" y="115" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">Activation</text>
  <text x="660" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">Function</text>
  
  <!-- Arrow -->
  <path d="M 750 110 L 800 110" stroke="#374151" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- Step 3: Signal Calculation -->
  <rect x="820" y="80" width="180" height="60" rx="10" fill="#F59E0B" filter="url(#shadow)"/>
  <text x="910" y="100" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">STEP 3</text>
  <text x="910" y="115" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">Calculate</text>
  <text x="910" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">Signals</text>
  
  <!-- Knowledge Capsules Network -->
  <text x="600" y="200" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#1E293B">
    Knowledge Capsules Network
  </text>
  
  <!-- Health Capsules -->
  <g id="healthCapsules">
    <!-- Exercise Capsule (Active) -->
    <circle cx="200" cy="250" r="40" fill="url(#activeGrad)" filter="url(#shadow)"/>
    <text x="200" y="245" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">EXERCISE</text>
    <text x="200" y="258" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">Active: 0.85</text>
    
    <!-- Nutrition Capsule (Active) -->
    <circle cx="350" cy="280" r="40" fill="url(#activeGrad)" filter="url(#shadow)"/>
    <text x="350" y="275" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">NUTRITION</text>
    <text x="350" y="288" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">Active: 0.78</text>
    
    <!-- Sleep Capsule (Active) -->
    <circle cx="200" cy="350" r="40" fill="url(#activeGrad)" filter="url(#shadow)"/>
    <text x="200" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">SLEEP</text>
    <text x="200" y="358" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">Active: 0.65</text>
    
    <!-- Hydration Capsule (Inactive) -->
    <circle cx="100" cy="300" r="35" fill="url(#capsuleGrad)" opacity="0.5" filter="url(#shadow)"/>
    <text x="100" y="295" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">HYDRATION</text>
    <text x="100" y="308" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="white">Inactive: 0.2</text>
    
    <!-- Stress Management -->
    <circle cx="300" cy="380" r="35" fill="url(#capsuleGrad)" opacity="0.7" filter="url(#shadow)"/>
    <text x="300" y="372" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">STRESS</text>
    <text x="300" y="382" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">MGMT</text>
    <text x="300" y="392" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="white">0.42</text>
  </g>
  
  <!-- Tech Capsules -->
  <g id="techCapsules">
    <!-- Programming Capsule -->
    <circle cx="600" cy="250" r="35" fill="url(#capsuleGrad)" opacity="0.5" filter="url(#shadow)"/>
    <text x="600" y="248" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">PROGRAMMING</text>
    <text x="600" y="258" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="white">Inactive: 0.15</text>
    
    <!-- AI Basics -->
    <circle cx="700" cy="300" r="35" fill="url(#capsuleGrad)" opacity="0.5" filter="url(#shadow)"/>
    <text x="700" y="295" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">AI BASICS</text>
    <text x="700" y="308" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="white">Inactive: 0.1</text>
    
    <!-- Web Dev -->
    <circle cx="550" cy="320" r="35" fill="url(#capsuleGrad)" opacity="0.5" filter="url(#shadow)"/>
    <text x="550" y="315" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">WEB DEV</text>
    <text x="550" y="328" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="white">Inactive: 0.08</text>
  </g>
  
  <!-- Learning Capsules -->
  <g id="learningCapsules">
    <!-- Effective Learning -->
    <circle cx="900" cy="280" r="35" fill="url(#capsuleGrad)" opacity="0.7" filter="url(#shadow)"/>
    <text x="900" y="272" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">EFFECTIVE</text>
    <text x="900" y="282" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">LEARNING</text>
    <text x="900" y="292" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="white">0.35</text>
    
    <!-- Time Management -->
    <circle cx="1000" cy="250" r="35" fill="url(#capsuleGrad)" opacity="0.6" filter="url(#shadow)"/>
    <text x="1000" y="245" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">TIME MGMT</text>
    <text x="1000" y="258" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="white">0.28</text>
    
    <!-- Memory Techniques -->
    <circle cx="950" cy="350" r="35" fill="url(#capsuleGrad)" opacity="0.5" filter="url(#shadow)"/>
    <text x="950" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">MEMORY</text>
    <text x="950" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">TECH</text>
    <text x="950" y="365" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="white">0.18</text>
  </g>
  
  <!-- Connections (showing active signals) -->
  <g id="connections" stroke="#EF4444" stroke-width="3" opacity="0.8">
    <!-- Strong connections between health capsules -->
    <line x1="200" y1="250" x2="350" y2="280"/>
    <line x1="200" y1="250" x2="200" y2="350"/>
    <line x1="350" y1="280" x2="200" y2="350"/>
    <line x1="200" y1="350" x2="300" y2="380"/>
  </g>
  
  <!-- Signal Flow Indicators -->
  <g id="signals">
    <circle cx="275" cy="265" r="5" fill="#EF4444">
      <animate attributeName="opacity" values="0;1;0" dur="2s" repeatCount="indefinite"/>
    </circle>
    <circle cx="200" cy="300" r="5" fill="#EF4444">
      <animate attributeName="opacity" values="0;1;0" dur="2s" begin="0.5s" repeatCount="indefinite"/>
    </circle>
    <circle cx="275" cy="315" r="5" fill="#EF4444">
      <animate attributeName="opacity" values="0;1;0" dur="2s" begin="1s" repeatCount="indefinite"/>
    </circle>
  </g>
  
  <!-- Steps 4 & 5 -->
  <rect x="150" y="450" width="180" height="60" rx="10" fill="#DC2626" filter="url(#shadow)"/>
  <text x="240" y="470" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">STEP 4</text>
  <text x="240" y="485" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">Final</text>
  <text x="240" y="500" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">Activations</text>
  
  <rect x="400" y="450" width="180" height="60" rx="10" fill="#059669" filter="url(#shadow)"/>
  <text x="490" y="470" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">STEP 5</text>
  <text x="490" y="485" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">Generate</text>
  <text x="490" y="500" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">Response</text>
  
  <!-- Final Response -->
  <rect x="650" y="420" width="400" height="120" rx="10" fill="#1F2937" filter="url(#shadow)"/>
  <text x="850" y="440" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">RESPONSE OUTPUT</text>
  <text x="670" y="460" font-family="Arial, sans-serif" font-size="10" fill="#10B981">"Based on my knowledge:"</text>
  <text x="670" y="475" font-family="Arial, sans-serif" font-size="9" fill="white">• Exercise strengthens muscles and boosts mood (0.85)</text>
  <text x="670" y="490" font-family="Arial, sans-serif" font-size="9" fill="white">• Balanced nutrition provides essential vitamins (0.78)</text>
  <text x="670" y="505" font-family="Arial, sans-serif" font-size="9" fill="white">• Quality sleep allows body repair (0.65)</text>
  <text x="670" y="525" font-family="Arial, sans-serif" font-size="9" fill="#F59E0B">Active Capsules: [exercise, nutrition, sleep]</text>
  
  <!-- Learning Feedback Loop -->
  <path d="M 850 540 Q 900 580 800 600 Q 700 580 750 540" stroke="#7C3AED" stroke-width="2" fill="none" stroke-dasharray="5,5"/>
  <text x="825" y="590" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#7C3AED">Feedback Loop</text>
  <text x="825" y="605" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#7C3AED">Strengthens/Weakens Connections</text>
  
  <!-- Legend -->
  <g id="legend" transform="translate(50, 600)">
    <rect x="0" y="0" width="300" height="120" rx="5" fill="white" stroke="#E5E7EB" filter="url(#shadow)"/>
    <text x="10" y="20" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#374151">Legend</text>
    
    <circle cx="25" cy="40" r="10" fill="url(#activeGrad)"/>
    <text x="45" y="45" font-family="Arial, sans-serif" font-size="10" fill="#374151">Active Capsule (>0.4 threshold)</text>
    
    <circle cx="25" cy="60" r="10" fill="url(#capsuleGrad)" opacity="0.5"/>
    <text x="45" y="65" font-family="Arial, sans-serif" font-size="10" fill="#374151">Inactive Capsule</text>
    
    <line x1="15" y1="80" x2="35" y2="80" stroke="#EF4444" stroke-width="3"/>
    <text x="45" y="85" font-family="Arial, sans-serif" font-size="10" fill="#374151">Active Signal Connection</text>
    
    <circle cx="25" cy="100" r="3" fill="#EF4444"/>
    <text x="45" y="105" font-family="Arial, sans-serif" font-size="10" fill="#374151">Signal Flow (animated)</text>
  </g>
  
  <!-- Algorithm Info -->
  <g id="algorithmInfo" transform="translate(900, 600)">
    <rect x="0" y="0" width="280" height="120" rx="5" fill="white" stroke="#E5E7EB" filter="url(#shadow)"/>
    <text x="10" y="20" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#374151">Algorithm Parameters</text>
    
    <text x="10" y="40" font-family="Arial, sans-serif" font-size="10" fill="#374151">• Activation Threshold: 0.4</text>
    <text x="10" y="55" font-family="Arial, sans-serif" font-size="10" fill="#374151">• Learning Rate: 0.1</text>
    <text x="10" y="70" font-family="Arial, sans-serif" font-size="10" fill="#374151">• Vector Model: all-MiniLM-L6-v2</text>
    <text x="10" y="85" font-family="Arial, sans-serif" font-size="10" fill="#374151">• Similarity Metric: Cosine</text>
    <text x="10" y="100" font-family="Arial, sans-serif" font-size="10" fill="#374151">• Auto-Connection: >0.3 similarity</text>
  </g>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" 
            refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#374151"/>
    </marker>
  </defs>
</svg>